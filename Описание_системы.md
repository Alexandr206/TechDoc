# 1. Описание Системы Навигации

## 1.1 Общая концепция

Система навигации предназначена для поиска кратчайшего пути на карте, содержащей препятствия. Робот использует карту в формате матрицы, где:

- **0** — свободная ячейка.
- **1** — ячейка с препятствием.

### 1.1.1 Основные компоненты системы

1. **Генерация карты**: система создаёт матрицу, представляющую пространство для перемещения робота. Каждая ячейка может быть свободной (0) или занята препятствием (1).
2. **Алгоритм поиска пути (A-Star)**: алгоритм реализует поиск кратчайшего пути от начальной до конечной точки, обходя препятствия.
3. **Оптимизация пути**: система улучшает найденный маршрут, добавляя "срезки" для перемещений по диагоналям.

### 1.1.2 Особенности системы

- Эффективность навигации зависит от характеристик карты и параметров эвристики.
- Алгоритм **A\*** гарантирует нахождение оптимального маршрута, если такой существует.
- Карта и препятствия генерируются случайно, что моделирует различные сценарии.
- Система поддерживает настройку параметров карты (размеры, плотность препятствий) для адаптации к разным условиям эксплуатации.
- Возможна оптимизация маршрута для уменьшения количества поворотов робота и сокращения времени его перемещения.
- Система легко интегрируется, благодаря минимальному числу внешних зависимостей.

### 1.1.3 Ограничения системы

- Размер карты не может быть меньше **2x2** клеток.
- Вероятность появления препятствий варьируется от **0** до **1**.
- Карта не может изменяться динамически: препятствия задаются только при инициализации.
- Робот перемещается только по четырём направлениям (вверх, вниз, влево, вправо), что ограничивает гибкость маршрута и может привести к не оптимальным результатам при низкой плотности препятствий.

   <img src="/img.png" width="330" height="330"/>

   *Рисунок 1. Неоптимальный маршрут при низкой плотности препятствий.*


- Большие карты или высокая плотность препятствий могут замедлить работу алгоритма и требовать больше ресурсов.
- Система не учитывает физические характеристики робота (размер, маневренность).

## 1.2 Описание алгоритма A-Star

Алгоритм **A-Star** является эффективным методом для поиска кратчайшего пути на графах и сетках. Его задача — найти оптимальный маршрут от начальной до конечной точки, минимизируя общую стоимость пути. Алгоритм использует два параметра для оценки каждой точки:

- **g(x)** — стоимость пути от начальной точки до текущей точки **x**.
- **h(x)** — эвристическая оценка оставшейся стоимости до целевой точки.

Общая оценка точки **x**:

\[ f(x) = g(x) + h(x) \]

где **f(x)** — прогнозируемая стоимость всего пути через точку **x**.

## 1.3 Основные этапы работы алгоритма

#### 1.3.1 Инициализация

- Алгоритм начинает с исходной точки.
- Для каждой точки рассчитываются значения **g(x)** и **f(x)**. Начальной точке присваиваются значения **g(x) = 0**, **f(x) = h(x)**.
- Начальная точка помещается в приоритетную очередь, где на первом месте находится точка с минимальным **f(x)**.

#### 1.3.2 Поиск

- Алгоритм извлекает точку с минимальным **f(x)** и помечает её как обработанную.
- Для каждого соседа этой точки пересчитывается стоимость пути **g(x)**. Если новая стоимость ниже предыдущей, обновляются значения **g(x)** и **f(x)**.
- Все непроработанные соседние точки добавляются в очередь на обработку.

#### 1.3.3 Завершение

- Процесс повторяется до тех пор, пока не будет достигнута целевая точка или не будут обработаны все доступные пути.
- Когда целевая точка достигнута, восстанавливается маршрут, начиная с целевой точки, через все предыдущие точки с минимальной стоимостью.

#### 1.3.4 Возврат результата

- Если путь найден, алгоритм возвращает последовательность координат для кратчайшего маршрута.
- Если целевая точка окружена препятствиями, и путь недоступен, возвращается сообщение об ошибке.

   ![A-Star](AStar.gif)

   *Рисунок 2. Пример работы алгоритма A-Star.*